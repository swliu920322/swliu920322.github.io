(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40db75da"],{"0e96":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c=Object(a["Z"])("data-v-f12ba538");Object(a["G"])("data-v-f12ba538");var o={class:"w100 h100 bk-img flex-column position-relative"},r={class:"flex-row just-center"},i={class:"flex-row"},l=Object(a["n"])("div",null,null,-1),u={class:"flex-1 flex-row mt20"},s={class:"flex-column just-center",style:{width:"19rem"}};Object(a["E"])();var d=c((function(e,t,n,c,d,b){var v=Object(a["M"])("SiteSearch"),f=Object(a["M"])("DataSelect"),j=Object(a["M"])("TimeLoop"),p=Object(a["M"])("VideoToggle"),O=Object(a["M"])("VideoDisplay"),g=Object(a["M"])("FullChange");return Object(a["D"])(),Object(a["j"])("div",o,[Object(a["n"])(v,{class:"position-absolute site-search",style:{"margin-left":"3rem"}}),Object(a["n"])("section",r,[Object(a["n"])("div",i,[Object(a["n"])(f,{ref:"searchRef",style:{"margin-right":"3rem"}},null,512),Object(a["n"])(f,{type:2,data:e.monitorData,placeholder:"请选择监控位置"},null,8,["data"])]),l]),Object(a["n"])(j,{class:"position-absolute time-loop",onLoop:e.loop},null,8,["onLoop"]),Object(a["n"])("main",u,[Object(a["n"])("section",s,[Object(a["n"])(p,{onChangePage:e.changePage},null,8,["onChangePage"])]),Object(a["n"])(O,{ref:"videoRef",class:"flex-1 h100",videoData:e.videoData},null,8,["videoData"])]),Object(a["n"])(g)])})),b=n("03c6"),v=n("387d"),f=n.n(v),j=Object(a["Z"])("data-v-9dda2d42");Object(a["G"])("data-v-9dda2d42");var p={class:"video-toggle position-relative flex-row"},O=Object(a["n"])("img",{class:"video-toggle__bk",src:f.a,alt:"半圆"},null,-1),g={class:"video-toggle__button flex-row align-center just-center"},m={class:"mb0 button-contain position-relative"};Object(a["E"])();var h=j((function(e,t,n,c,o,r){return Object(a["D"])(),Object(a["j"])("section",p,[O,Object(a["n"])("div",g,[Object(a["n"])("ul",m,[Object(a["n"])("li",{class:"button-contain__top",onClick:t[1]||(t[1]=function(t){return e.gotoPage(-1)})}),Object(a["n"])("li",{class:"button-contain__bottom",onClick:t[2]||(t[2]=function(t){return e.gotoPage(1)})})])])])})),w=Object(a["o"])({name:"video-toggle",emits:{changePage:null},setup:function(e,t){return{gotoPage:function(e){t.emit("changePage",e)}}}});n("f025");w.render=h,w.__scopeId="data-v-9dda2d42";var _=w,x=Object(a["Z"])("data-v-00bc5d7e");Object(a["G"])("data-v-00bc5d7e");var A={class:"time-loop__num"},D=Object(a["n"])("span",{class:"time-loop__unit"},"分钟",-1),I=Object(a["n"])("span",{class:"time-loop__desc"},"后切换视频",-1),y={class:"time-loop__progress"};Object(a["E"])();var M=x((function(e,t,n,c,o,r){return Object(a["D"])(),Object(a["j"])("div",{class:"flex-column time-loop cur-pointer",onClick:t[1]||(t[1]=function(){return e.changeTimer&&e.changeTimer.apply(e,arguments)})},[Object(a["n"])("div",null,[Object(a["n"])("span",A,Object(a["O"])(e.current),1),D]),I,Object(a["n"])("div",y,[Object(a["n"])("div",{class:"time-loop__active",style:{transform:"translateX("+e.progress+"%)"}},null,4)])])})),P=Object(a["o"])({name:"time-loop",props:{times:{type:Array,default:function(){return[1,3,5,10,15,20,30].reverse()}}},emits:{loop:null},setup:function(e,t){var n=Object(a["I"])(0),c=Object(a["h"])((function(){return e.times[n.value]})),o=Object(a["I"])(0),r=Object(a["I"])(1),i=Object(a["I"])();function l(e){i.value||(i.value=e);var n=o.value;o.value=(e-i.value)/(60*c.value)%1e3/10,n>o.value&&t.emit("loop"),r.value=window.requestAnimationFrame(l)}function u(){window.cancelAnimationFrame(r.value)}function s(){n.value=++n.value%e.times.length,u(),i.value=void 0,r.value=window.requestAnimationFrame(l)}return Object(a["A"])((function(){r.value=window.requestAnimationFrame(l)})),{current:c,changeTimer:s,progress:o}}});n("b76e");P.render=M,P.__scopeId="data-v-00bc5d7e";var T=P,k=Object(a["Z"])("data-v-363bab51"),C=k((function(e,t,n,c,o,r){var i=Object(a["M"])("VideoTest");return Object(a["D"])(),Object(a["j"])(a["f"],{class:["wrapper",e.activeClass],name:"video",tag:"div"},{default:k((function(){return[(Object(a["D"])(!0),Object(a["j"])(a["b"],null,Object(a["K"])(e.newArr[e.curIndex],(function(t,n){return Object(a["D"])(),Object(a["j"])(i,{auto:"",ref:e.setItemRef,key:t.id,class:"item-".concat(n+1),item:t},null,8,["class","item"])})),128))]})),_:1},8,["class"])})),S=n("5530"),E=(n("caad"),n("13d5"),n("159b"),n("a434"),n("4de4"),n("fb6a"),n("cb90")),R=Object(a["o"])({name:"video-display",components:{VideoTest:E["a"]},props:{videoData:{type:Array,default:function(){return[]}}},setup:function(e){var t=Object(a["H"])({newArr:[[]],lastSize:0,curIndex:0}),n=Object(a["I"])([]);function c(n){function a(e){return[1,2].includes(e.level)?4:1}function c(e){return e.reduce((function(e,t){return e+a(t)}),0)}var o=[];e.videoData.forEach((function(e){var r=t.newArr[t.newArr.length-1],i=c(r);if(i<n){var l=a(e)+i;l<=n?(r.push(e),l===n&&r.sort((function(e,t){return e.level-t.level}))):o.push(e)}else{var u=c(o.splice(0,4));u<n?t.newArr.push([e]):o.push(e)}})),t.lastSize=[n,13,10,7,4][t.newArr.slice(-1)[0].filter((function(e){return e.level<3})).length]}function o(e){var c=t.curIndex+e;t.curIndex=(c<0?t.newArr.length+c:c)%t.newArr.length,n.value.forEach((function(e){null===e||void 0===e||e.end()})),n.value=[],Object(a["v"])((function(){n.value.forEach((function(e){null===e||void 0===e||e.start()}))}))}return c(16),Object(a["B"])((function(){n.value.forEach((function(e){return null===e||void 0===e?void 0:e.end()}))})),Object(S["a"])(Object(S["a"])({activeClass:Object(a["h"])((function(){return t.curIndex===t.newArr.length-1?"wrapper"+t.lastSize:"wrapper"+t.newArr[t.curIndex].length})),changePage:o},Object(a["R"])(t)),{},{setItemRef:function(e){n.value.push(e)}})}});n("aab0");R.render=C,R.__scopeId="data-v-363bab51";var V=R,F=n("d257");n("d81d"),n("cb29");function L(){var e=["甲烷浓度超标","过水断面水位超标"];return new Array(50+~~(50*Math.random())).fill("").map((function(t,n){return{id:n+1,level:1+~~(8*Math.random()),reason:e[~~(Math.random()*e.length)],value:~~(100*Math.random()),coal:"海湾煤矿",place:"D24386工作面"}}))}var Z=L,q=n("1b61"),z=n("ebf7"),G=n("7b04"),J=Object(a["o"])({name:"realtime-video",components:{FullChange:G["a"],DataSelect:q["a"],TimeLoop:T,VideoToggle:_,SiteSearch:b["a"],VideoDisplay:V},setup:function(){var e=Object(a["I"])(),t=Object(a["I"])();return F["a"].addListener((function(t){var n;null===(n=e.value)||void 0===n||n.setValue(t)})),{videoRef:t,monitorData:z["b"],videoData:Z(),loop:function(){var e;null===(e=t.value)||void 0===e||e.changePage(1)},changePage:function(e){var n;null===(n=t.value)||void 0===n||n.changePage(e)},searchRef:e}}});n("b455");J.render=d,J.__scopeId="data-v-f12ba538";t["default"]=J},"2ed0":function(e,t,n){},"81d5":function(e,t,n){"use strict";var a=n("7b0b"),c=n("23cb"),o=n("50c4");e.exports=function(e){var t=a(this),n=o(t.length),r=arguments.length,i=c(r>1?arguments[1]:void 0,n),l=r>2?arguments[2]:void 0,u=void 0===l?n:c(l,n);while(u>i)t[i++]=e;return t}},"942a":function(e,t,n){},"9c37":function(e,t,n){},a434:function(e,t,n){"use strict";var a=n("23e7"),c=n("23cb"),o=n("a691"),r=n("50c4"),i=n("7b0b"),l=n("65f0"),u=n("8418"),s=n("1dde"),d=s("splice"),b=Math.max,v=Math.min,f=9007199254740991,j="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,a,s,d,p,O,g=i(this),m=r(g.length),h=c(e,m),w=arguments.length;if(0===w?n=a=0:1===w?(n=0,a=m-h):(n=w-2,a=v(b(o(t),0),m-h)),m+n-a>f)throw TypeError(j);for(s=l(g,a),d=0;d<a;d++)p=h+d,p in g&&u(s,d,g[p]);if(s.length=a,n<a){for(d=h;d<m-a;d++)p=d+a,O=d+n,p in g?g[O]=g[p]:delete g[O];for(d=m;d>m-a+n;d--)delete g[d-1]}else if(n>a)for(d=m-a;d>h;d--)p=d+a-1,O=d+n-1,p in g?g[O]=g[p]:delete g[O];for(d=0;d<n;d++)g[d+h]=arguments[d+2];return g.length=m-a+n,s}})},aab0:function(e,t,n){"use strict";n("2ed0")},b455:function(e,t,n){"use strict";n("9c37")},b76e:function(e,t,n){"use strict";n("e6f1")},cb29:function(e,t,n){var a=n("23e7"),c=n("81d5"),o=n("44d2");a({target:"Array",proto:!0},{fill:c}),o("fill")},e6f1:function(e,t,n){},f025:function(e,t,n){"use strict";n("942a")}}]);
//# sourceMappingURL=chunk-40db75da.25f95499.js.map